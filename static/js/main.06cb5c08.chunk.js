(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/wallet.5523f71a.png"},34:function(e,t,a){e.exports=a(48)},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=a(22),i=a(10),u=a(14),s=a(30),d=a(31),p=a(12),m=a(15),h=a.n(m),E=a(19),b=function(e){return{type:"GET_CURRENCIES_SUCCESS",payload:{currencies:e}}},v=function(e,t){return{type:"NEW_EXPENSE",payload:{id:0,value:e.value,description:e.description,currency:e.currency,method:e.method,tag:e.tag,exchangeRates:t}}},f={email:""};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_EMAIL":return Object(p.a)(Object(p.a)({},e),{},{email:t.payload.email});default:return e}},O=a(33),j={currencies:[],expenses:[],total:0,expensesIdCounter:0};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCIES_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{currencies:Object.entries(t.payload.currencies.data)});case"NEW_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(O.a)(e.expenses),[{id:e.expensesIdCounter,value:t.payload.value,description:t.payload.description,currency:t.payload.currency,method:t.payload.method,tag:t.payload.tag,exchangeRates:t.payload.exchangeRates}]),expensesIdCounter:e.expensesIdCounter+1});case"TOTAL_COST":return Object(p.a)(Object(p.a)({},e),{},{total:parseFloat(e.total)+parseFloat(t.payload.total)});case"REMOVE_EXPENSE":var a=e.expenses.filter((function(e){return e.id===Number(t.payload.index)}))[0],n=a.currency;return Object(p.a)(Object(p.a)({},e),{},{total:e.total-Math.round(Number(a.exchangeRates[n].ask)*Number(a.value)*100)/100,expenses:e.expenses.filter((function(e){return e!==a}))});default:return e}},C=Object(u.combineReducers)({user:y,wallet:g}),x=Object(u.createStore)(C,Object(s.composeWithDevTools)(Object(u.applyMiddleware)(d.a))),k=a(2),w=a(17),S=a(3),T=a(4),R=a(11),D=a(6),N=a(5),M=(a(44),function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).state={userEmail:"",password:"",validateEmail:!1},e.handleChange=e.handleChange.bind(Object(R.a)(e)),e.handleClick=e.handleClick.bind(Object(R.a)(e)),e}return Object(T.a)(a,[{key:"validateEmail",value:function(e){return/\S+@\S+\.\S+/.test(String(e).toLowerCase())}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.value,r=a.id;this.setState(Object(w.a)({},r,n),(function(){var e=t.state.userEmail,a=t.validateEmail(e);t.setState({validateEmail:a})}))}},{key:"handleClick",value:function(){(0,this.props.userEmailDispatchAction)(this.state.userEmail)}},{key:"render",value:function(){var e=this.state,t=e.userEmail,a=e.password,n=e.validateEmail;return r.a.createElement("section",{id:"login-wrapper"},r.a.createElement("form",{id:"login-form"},r.a.createElement("input",{type:"email",id:"userEmail","data-testid":"email-input",onChange:this.handleChange,value:t,required:!0,placeholder:"email"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"password","data-testid":"password-input",onChange:this.handleChange,placeholder:"senha"}),r.a.createElement("br",null),r.a.createElement(o.b,{to:"/carteira"},r.a.createElement("button",{type:"button",disabled:!(a.length>=6&&n),onClick:this.handleClick},"Entrar"))))}}]),a}(r.a.Component)),_=Object(i.b)(null,(function(e){return{userEmailDispatchAction:function(t){return e(function(e){return{type:"USER_EMAIL",payload:{email:e}}}(t))}}}))(M),A=a(32),I=a.n(A),F=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.total;return r.a.createElement("div",{id:"header"},r.a.createElement("img",{src:I.a,alt:"wallet",id:"wallet-img"}),r.a.createElement("section",{id:"user-info"},t&&r.a.createElement("span",null,"Email: ",r.a.createElement("span",{"data-testid":"email-field"},t)),r.a.createElement("span",null,"Despesa Total:"," ",r.a.createElement("span",{"data-testid":"total-field"},a&&Math.round(100*Number(a))/100),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))))}}]),a}(n.Component);F.defaultProps={total:0};var L=Object(i.b)((function(e){return{email:e.user.email,total:e.wallet.total}}))(F),U=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props.currencies;return r.a.createElement(r.a.Fragment,null,e.filter((function(e){return"USDT"!==e[0]&&"DOGE"!==e[0]})).map((function(e,t){return r.a.createElement("option",{key:t,value:e[0]},e[0])})))}}]),a}(n.Component),B=Object(i.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{getCurrencies:function(){return e(function(){var e=Object(E.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t(b({data:n}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(U),W=function(e,t){var a=t.length-1,n=t[a].value,r=t[a].currency;e(n*Object.entries(t[a].exchangeRates).filter((function(e){return e[0]===r}))[0][1].ask)},P=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(R.a)(e)),e.handleTotal=e.handleTotal.bind(Object(R.a)(e)),e}return Object(T.a)(a,[{key:"handleClick",value:function(){var e=Object(E.a)(h.a.mark((function e(){var t,a,n,r,l,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.value,n=t.description,r=t.currency,l=t.method,c=t.tag,o=t.newExpense,e.next=3,o({value:a,description:n,currency:r,method:l,tag:c});case 3:this.handleTotal();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleTotal",value:function(){var e=this.props,t=e.totalCost,a=e.expenses;W(t,a)}},{key:"render",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa")}}]),a}(n.Component),V=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{newExpense:function(t){var a=t.value,n=t.description,r=t.currency,l=t.method,c=t.tag;return e(function(e){var t=e.value,a=e.description,n=e.currency,r=e.method,l=e.tag;return function(){var e=Object(E.a)(h.a.mark((function e(c){var o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return o=e.sent,e.next=5,o.json();case 5:i=e.sent,c(v({value:t,description:a,currency:n,method:r,tag:l},i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({value:a,description:n,currency:r,method:l,tag:c}))},totalCost:function(t){return e(function(e){return{type:"TOTAL_COST",payload:{total:e}}}(t))}}}))(P),X=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).state={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(R.a)(e)),e}return Object(T.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.id;this.setState(Object(w.a)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag;return r.a.createElement("form",{id:"expense-form"},r.a.createElement("label",{htmlFor:"value",className:"expense-input"},"Valor: ",r.a.createElement("input",{type:"number",id:"value",onChange:this.handleChange,required:!0})),r.a.createElement("label",{htmlFor:"description",className:"expense-input"},"Descri\xe7\xe3o:"," ",r.a.createElement("input",{type:"text",id:"description",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency",className:"expense-input"},"Moeda:"," ",r.a.createElement("select",{id:"currency",onChange:this.handleChange},r.a.createElement(B,null))),r.a.createElement("label",{htmlFor:"method",className:"expense-input"},"M\xe9todo de pagamento:"," ",r.a.createElement("select",{id:"method",onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag",className:"expense-input"},"Tag:"," ",r.a.createElement("select",{id:"tag",onChange:this.handleChange},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement(V,{value:t,description:a,currency:n,method:l,tag:c}))}}]),a}(n.Component),z=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Excluir")))}}]),a}(n.Component),G=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).handleDeleteButton=e.handleDeleteButton.bind(Object(R.a)(e)),e}return Object(T.a)(a,[{key:"handleDeleteButton",value:function(e){var t=e.target,a=t.value,n=t.type,r=this.props.removeExpense;"button"===n&&(r(a),console.log(a))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("tbody",null,t.length>0&&t.map((function(t){var a=t.currency;return r.a.createElement("tr",{key:t.id,id:"tr-".concat(t.id)},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,t.exchangeRates[a].name),r.a.createElement("td",null,Math.round(100*t.exchangeRates[a].ask)/100),r.a.createElement("td",null,Math.round(t.exchangeRates[a].ask*t.value*100)/100),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:e.handleDeleteButton,value:t.id},"x")))})))}}]),a}(n.Component),q=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{removeExpense:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",payload:{index:e}}}(t))}}}))(G),J=function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement(z,null),r.a.createElement(q,null))}}]),a}(n.Component),$=(a(46),function(e){Object(D.a)(a,e);var t=Object(N.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"wallet-wrapper"},r.a.createElement(L,null),r.a.createElement(X,null),r.a.createElement(J,null))}}]),a}(r.a.Component));a(47);var H=function(){return r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",component:_}),r.a.createElement(k.a,{exact:!0,path:"/carteira",component:$}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{basename:"/TrybeWallet"},r.a.createElement(i.a,{store:x},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.06cb5c08.chunk.js.map